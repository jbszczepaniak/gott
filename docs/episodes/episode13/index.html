<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Go on the toilet  | #13 - About functions implementing interfaces</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.58.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/gott/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="#13 - About functions implementing interfaces" />
<meta property="og:description" content="get pdf here ðŸ–¨ It is commonly known that struct types can implement interfaces, but did you know that any type can implement an interface?
An interface used when working with HTTP servers is Handler. It has one method ServeHTTP and every struct implementing this interface can be registered as a handler for incoming HTTP requests. This is simple implementation of Handler interface.
type helloServer struct{} func (s helloServer) ServeHTTP(w http." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jbszczepaniak.github.io/gott/episodes/episode13/" />
<meta property="article:published_time" content="2019-10-22T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-10-22T00:00:00+00:00" />
<meta itemprop="name" content="#13 - About functions implementing interfaces">
<meta itemprop="description" content="get pdf here ðŸ–¨ It is commonly known that struct types can implement interfaces, but did you know that any type can implement an interface?
An interface used when working with HTTP servers is Handler. It has one method ServeHTTP and every struct implementing this interface can be registered as a handler for incoming HTTP requests. This is simple implementation of Handler interface.
type helloServer struct{} func (s helloServer) ServeHTTP(w http.">


<meta itemprop="datePublished" content="2019-10-22T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-10-22T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="269">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="#13 - About functions implementing interfaces"/>
<meta name="twitter:description" content="get pdf here ðŸ–¨ It is commonly known that struct types can implement interfaces, but did you know that any type can implement an interface?
An interface used when working with HTTP servers is Handler. It has one method ServeHTTP and every struct implementing this interface can be registered as a handler for incoming HTTP requests. This is simple implementation of Handler interface.
type helloServer struct{} func (s helloServer) ServeHTTP(w http."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://jbszczepaniak.github.io/gott/" class="f3 fw2 hover-white no-underline white-90 dib">
      Go on the toilet
    </a>
    <div class="flex-l items-center">
      

      
      












    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        EPISODES
      </p>
      <h1 class="f1 athelas mb1">#13 - About functions implementing interfaces</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2019-10-22T00:00:00Z">October 22, 2019</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<h2 id="get-pdf-here-gott-episode13-pdf"><a href="/gott/episode13.pdf">get pdf here</a> ðŸ–¨</h2>

<p>It is commonly known that struct types can implement interfaces, but did you know that any type can implement an interface?</p>

<p>An interface used when working with HTTP servers is <code>Handler</code>. It has one method <code>ServeHTTP</code> and every struct implementing this interface can be registered as a handler for incoming HTTP requests. This is simple implementation of <code>Handler</code> interface.</p>

<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">type</span> <span style="color:#75af00">helloServer</span> <span style="color:#00a8c8">struct</span><span style="color:#111">{}</span>

<span style="color:#00a8c8">func</span> <span style="color:#111">(</span><span style="color:#75af00">s</span> <span style="color:#75af00">helloServer</span><span style="color:#111">)</span> <span style="color:#75af00">ServeHTTP</span><span style="color:#111">(</span><span style="color:#75af00">w</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">ResponseWriter</span><span style="color:#111">,</span> <span style="color:#75af00">r</span> <span style="color:#f92672">*</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Request</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#75af00">w</span><span style="color:#111">.</span><span style="color:#75af00">Write</span><span style="color:#111">([]</span><span style="color:#111">byte</span><span style="color:#111">(</span><span style="color:#d88200">&#34;hello&#34;</span><span style="color:#111">))</span> <span style="color:#75715e">// usually something useful is going on here...
</span><span style="color:#75715e"></span><span style="color:#111">}</span>

<span style="color:#75715e">//registration
</span><span style="color:#75715e"></span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Handle</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/hello&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">helloHandler</span><span style="color:#111">)</span></code></pre></div>

<p>Designers of the standard library also thought of a use case where function is register as a handler that will handle HTTP requests and the way they did it is quite astonishing.</p>

<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">type</span> <span style="color:#75af00">HandlerFunc</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">ResponseWriter</span><span style="color:#111">,</span> <span style="color:#f92672">*</span><span style="color:#75af00">Request</span><span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#111">(</span><span style="color:#75af00">f</span> <span style="color:#75af00">HandlerFunc</span><span style="color:#111">)</span> <span style="color:#75af00">ServeHTTP</span><span style="color:#111">(</span><span style="color:#75af00">w</span> <span style="color:#75af00">ResponseWriter</span><span style="color:#111">,</span> <span style="color:#75af00">r</span> <span style="color:#f92672">*</span><span style="color:#75af00">Request</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#75af00">f</span><span style="color:#111">(</span><span style="color:#75af00">w</span><span style="color:#111">,</span> <span style="color:#75af00">r</span><span style="color:#111">)</span>
<span style="color:#111">}</span></code></pre></div>

<p>When I first saw it, I couldn&rsquo;t understand it. Now it makes perfect sense and I find it clever. First of all there is a <code>HandlerFunc</code> type that is a proxy to the function which accepts <code>ResponseWriter</code> and <code>*Request</code>. Every function with that signature can be converted to the type <code>HandlerFunc</code>.
In the next line magic happens. There is <code>ServeHTTP</code> method defined on the <code>HandlerFunc</code> type and the only thing it does, it kind of calls itself. Since every type with <code>ServeHTTP</code> defined on it implements Handler interface therefore <code>HandlerFunc</code> type implements <code>Handler</code> interface.</p>

<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">hiHandler</span><span style="color:#111">(</span><span style="color:#75af00">w</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">ResponseWriter</span><span style="color:#111">,</span> <span style="color:#75af00">r</span> <span style="color:#f92672">*</span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Request</span><span style="color:#111">)</span> <span style="color:#111">{</span> <span style="color:#75af00">w</span><span style="color:#111">.</span><span style="color:#75af00">Write</span><span style="color:#111">([]</span><span style="color:#111">byte</span><span style="color:#111">(</span><span style="color:#d88200">&#34;hi&#34;</span><span style="color:#111">))</span> <span style="color:#111">}</span>

<span style="color:#75715e">//registration
</span><span style="color:#75715e"></span><span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">Handle</span><span style="color:#111">(</span><span style="color:#d88200">&#34;/hi&#34;</span><span style="color:#111">,</span> <span style="color:#75af00">http</span><span style="color:#111">.</span><span style="color:#75af00">HandlerFunc</span><span style="color:#111">(</span><span style="color:#75af00">hiHandler</span><span style="color:#111">))</span></code></pre></div>

<p><code>http.Handle</code> accepts <code>Handler</code> as a second parameter, but since <code>hiHandler</code> can be converted to <code>HandlerFunc</code> which implements <code>Handler</code> - we can just use the function after converting it to <code>HandlerFunc</code>.</p>
<ul class="pa0">
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://jbszczepaniak.github.io/gott/" >
    &copy; 2019 Go on the toilet
  </a>
    <div>











</div>
  </div>
</footer>

    

  <script src="/gott/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
