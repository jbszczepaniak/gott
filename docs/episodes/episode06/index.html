<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Go on the toilet  | #06 - Functions are first-class citizens.</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.58.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/gott/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="#06 - Functions are first-class citizens." />
<meta property="og:description" content="get pdf here ðŸ–¨ This property has some interesting consequences (we will show 4 of them). Thanks to it you can accept function as an argument to the function and return a function from a function. Because of this we can implement the decorator pattern. Here is one that logs the fact that function started and finished.
func logged(f func(int) int) func(int) int { return func(i int) int { fmt." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jbszczepaniak.github.io/gott/episodes/episode06/" />
<meta property="article:published_time" content="2019-02-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-02-13T00:00:00+00:00" />
<meta itemprop="name" content="#06 - Functions are first-class citizens.">
<meta itemprop="description" content="get pdf here ðŸ–¨ This property has some interesting consequences (we will show 4 of them). Thanks to it you can accept function as an argument to the function and return a function from a function. Because of this we can implement the decorator pattern. Here is one that logs the fact that function started and finished.
func logged(f func(int) int) func(int) int { return func(i int) int { fmt.">


<meta itemprop="datePublished" content="2019-02-13T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-02-13T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="204">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="#06 - Functions are first-class citizens."/>
<meta name="twitter:description" content="get pdf here ðŸ–¨ This property has some interesting consequences (we will show 4 of them). Thanks to it you can accept function as an argument to the function and return a function from a function. Because of this we can implement the decorator pattern. Here is one that logs the fact that function started and finished.
func logged(f func(int) int) func(int) int { return func(i int) int { fmt."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://jbszczepaniak.github.io/gott/" class="f3 fw2 hover-white no-underline white-90 dib">
      Go on the toilet
    </a>
    <div class="flex-l items-center">
      

      
      












    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        EPISODES
      </p>
      <h1 class="f1 athelas mb1">#06 - Functions are first-class citizens.</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2019-02-13T00:00:00Z">February 13, 2019</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<h2 id="get-pdf-here-gott-episode06-pdf"><a href="/gott/episode06.pdf">get pdf here</a> ðŸ–¨</h2>

<p>This property has some interesting consequences (we will show 4 of them). Thanks to it you can accept function as an argument to the function and return a function from a function. Because of this we can implement the <em>decorator pattern</em>. Here is one that logs the fact that function started and finished.</p>

<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">logged</span><span style="color:#111">(</span><span style="color:#75af00">f</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#00a8c8">int</span><span style="color:#111">)</span> <span style="color:#00a8c8">int</span><span style="color:#111">)</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#00a8c8">int</span><span style="color:#111">)</span> <span style="color:#00a8c8">int</span> <span style="color:#111">{</span> 
  <span style="color:#00a8c8">return</span> <span style="color:#00a8c8">func</span><span style="color:#111">(</span><span style="color:#75af00">i</span> <span style="color:#00a8c8">int</span><span style="color:#111">)</span> <span style="color:#00a8c8">int</span> <span style="color:#111">{</span>
    <span style="color:#75af00">fmt</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#d88200">&#34;start&#34;</span><span style="color:#111">)</span>
    <span style="color:#00a8c8">defer</span> <span style="color:#00a8c8">func</span><span style="color:#111">()</span> <span style="color:#111">{</span> <span style="color:#75af00">fmt</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#d88200">&#34;finish&#34;</span><span style="color:#111">)</span> <span style="color:#111">}()</span>
    <span style="color:#00a8c8">return</span> <span style="color:#75af00">f</span><span style="color:#111">(</span><span style="color:#75af00">i</span><span style="color:#111">)</span>
  <span style="color:#111">}</span>
<span style="color:#111">}</span></code></pre></div>

<p>Another characteristic of being first-class citizen is also visible in the code above. The function that we return is anonymous function - it doesn&rsquo;t have a name and we don&rsquo;t care about it. Now, how would you use such decorator?</p>

<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#75af00">square</span> <span style="color:#111">(</span><span style="color:#00a8c8">int</span><span style="color:#111">)</span> <span style="color:#00a8c8">int</span> <span style="color:#111">{</span>
  <span style="color:#75af00">fmt</span><span style="color:#111">.</span><span style="color:#75af00">Println</span><span style="color:#111">(</span><span style="color:#d88200">&#34;squaring: &#34;</span><span style="color:#111">,</span> <span style="color:#75af00">i</span><span style="color:#111">)</span>
  <span style="color:#00a8c8">return</span> <span style="color:#75af00">i</span> <span style="color:#f92672">*</span> <span style="color:#75af00">i</span>
<span style="color:#111">}</span>
<span style="color:#00a8c8">var</span> <span style="color:#75af00">loggedSquare</span> <span style="color:#111">=</span> <span style="color:#75af00">logged</span><span style="color:#111">(</span><span style="color:#75af00">square</span><span style="color:#111">)</span>

<span style="color:#00a8c8">func</span> <span style="color:#75af00">main</span> <span style="color:#111">()</span> <span style="color:#111">{</span>
  <span style="color:#75af00">loggedSquare</span><span style="color:#111">(</span><span style="color:#ae81ff">7</span><span style="color:#111">)</span>
<span style="color:#111">}</span>
<span style="color:#75715e">// start
</span><span style="color:#75715e">// squaring:  7
</span><span style="color:#75715e"></span><span style="color:#f92672">//</span> <span style="color:#75af00">finish</span></code></pre></div>

<p>Decorator works just as expected - we are able to do something before and after function call. Example above seems irrelevant but it shows the mechanics of the pattern itself. Instead we could time how long function was executing or implement a backoff mechanism. Also we observed that function can be assigned to a variable.</p>
<ul class="pa0">
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://jbszczepaniak.github.io/gott/" >
    &copy; 2019 Go on the toilet
  </a>
    <div>











</div>
  </div>
</footer>

    

  <script src="/gott/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
