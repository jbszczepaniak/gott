<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Go on the toilet  | #02 - There is no finally. In go you defer stuff.</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.58.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/gott/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="#02 - There is no finally. In go you defer stuff." />
<meta property="og:description" content="get pdf here ðŸ–¨ If you want to make sure that something will happen, in go you can use defer. Statement marked with defer will be called at the end of enclosing function.
Examples from Docker project:
defer os.RemoveAll(tmp) // inside test as clean-up step  defer ls.mountL.Unlock() // make sure to release acquired lock  defer f.Close() // close file after reading content  defer body.Close() // close HTTP response body after reading content  defer d." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jbszczepaniak.github.io/gott/episodes/episode02/" />
<meta property="article:published_time" content="2019-01-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-01-31T00:00:00+00:00" />
<meta itemprop="name" content="#02 - There is no finally. In go you defer stuff.">
<meta itemprop="description" content="get pdf here ðŸ–¨ If you want to make sure that something will happen, in go you can use defer. Statement marked with defer will be called at the end of enclosing function.
Examples from Docker project:
defer os.RemoveAll(tmp) // inside test as clean-up step  defer ls.mountL.Unlock() // make sure to release acquired lock  defer f.Close() // close file after reading content  defer body.Close() // close HTTP response body after reading content  defer d.">


<meta itemprop="datePublished" content="2019-01-31T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-01-31T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="129">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="#02 - There is no finally. In go you defer stuff."/>
<meta name="twitter:description" content="get pdf here ðŸ–¨ If you want to make sure that something will happen, in go you can use defer. Statement marked with defer will be called at the end of enclosing function.
Examples from Docker project:
defer os.RemoveAll(tmp) // inside test as clean-up step  defer ls.mountL.Unlock() // make sure to release acquired lock  defer f.Close() // close file after reading content  defer body.Close() // close HTTP response body after reading content  defer d."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://jbszczepaniak.github.io/gott/" class="f3 fw2 hover-white no-underline white-90 dib">
      Go on the toilet
    </a>
    <div class="flex-l items-center">
      

      
      












    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        EPISODES
      </p>
      <h1 class="f1 athelas mb1">#02 - There is no finally. In go you defer stuff.</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2019-01-31T00:00:00Z">January 31, 2019</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<h2 id="get-pdf-here-gott-episode02-pdf"><a href="/gott/episode02.pdf">get pdf here</a> ðŸ–¨</h2>

<p>If you want to make sure that something will happen, in go you can use <code>defer</code>. Statement marked with defer will be called at the end of enclosing function.</p>

<p>Examples from Docker project:</p>

<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">defer</span> <span style="color:#75af00">os</span><span style="color:#111">.</span><span style="color:#75af00">RemoveAll</span><span style="color:#111">(</span><span style="color:#75af00">tmp</span><span style="color:#111">)</span> <span style="color:#75715e">// inside test as clean-up step
</span><span style="color:#75715e"></span>
<span style="color:#00a8c8">defer</span> <span style="color:#75af00">ls</span><span style="color:#111">.</span><span style="color:#75af00">mountL</span><span style="color:#111">.</span><span style="color:#75af00">Unlock</span><span style="color:#111">()</span> <span style="color:#75715e">// make sure to release acquired lock
</span><span style="color:#75715e"></span>
<span style="color:#00a8c8">defer</span> <span style="color:#75af00">f</span><span style="color:#111">.</span><span style="color:#75af00">Close</span><span style="color:#111">()</span> <span style="color:#75715e">// close file after reading content
</span><span style="color:#75715e"></span>
<span style="color:#00a8c8">defer</span> <span style="color:#75af00">body</span><span style="color:#111">.</span><span style="color:#75af00">Close</span><span style="color:#111">()</span> <span style="color:#75715e">// close HTTP response body after reading content
</span><span style="color:#75715e"></span>
<span style="color:#00a8c8">defer</span> <span style="color:#75af00">d</span><span style="color:#111">.</span><span style="color:#75af00">Stop</span><span style="color:#111">()</span> <span style="color:#f92672">//</span> <span style="color:#75af00">stop</span> <span style="color:#75af00">a</span> <span style="color:#75af00">daemon</span> </code></pre></div>

<p>Very often defer is used at the beginning of the function, which is very different from usage of finally in other languages (again example from Docker):</p>

<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a8c8">func</span> <span style="color:#111">(</span><span style="color:#75af00">ps</span> <span style="color:#f92672">*</span><span style="color:#75af00">Store</span><span style="color:#111">)</span> <span style="color:#75af00">GetV2Plugin</span><span style="color:#111">(</span><span style="color:#75af00">refOrID</span> <span style="color:#00a8c8">string</span><span style="color:#111">)</span> <span style="color:#111">(</span><span style="color:#f92672">*</span><span style="color:#75af00">v2</span><span style="color:#111">.</span><span style="color:#75af00">Plugin</span><span style="color:#111">,</span> <span style="color:#00a8c8">error</span><span style="color:#111">)</span> <span style="color:#111">{</span>
  <span style="color:#75af00">ps</span><span style="color:#111">.</span><span style="color:#75af00">RLock</span><span style="color:#111">()</span>
  <span style="color:#00a8c8">defer</span> <span style="color:#75af00">ps</span><span style="color:#111">.</span><span style="color:#75af00">RUnlock</span><span style="color:#111">()</span>
  <span style="color:#960050;background-color:#1e0010">â€¦</span>
<span style="color:#111">}</span></code></pre></div>

<p>Since <code>Runlcok()</code> is deferred, it will for sure happen at the end.</p>
<ul class="pa0">
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://jbszczepaniak.github.io/gott/" >
    &copy; 2019 Go on the toilet
  </a>
    <div>











</div>
  </div>
</footer>

    

  <script src="/gott/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
